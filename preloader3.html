<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>HFG CAPITAL</title>
  <meta name="description" content="HFG CAPITAL - Private Investment Office" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="shortcut icon" href="favicon/favicon.ico">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <style>
    /* --- 1. VARIABLES & BASE --- */
    :root {
      --bg-color: #000000;
      --gold-accent: #D4AF37;
      --text-white: #ffffff;
      --font-main: 'Montserrat', sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-main);
      height: 100vh; width: 100vw;
      overflow: hidden;
      background-color: var(--bg-color);
      position: relative;
    }

    /* --- 2. BACKGROUND IMAGE (Caché sous l'overlay au début) --- */
    .bg-container {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0; /* Au fond */
    }

    .bg-image {
      width: 100%; height: 100%; object-fit: cover;
      opacity: 0; /* Caché au début, géré par GSAP */
      transform: scale(1.1); /* Zoom initial */
    }

    /* --- 3. L'ECRAN DE CHARGEMENT (L'Overlay) --- */
    .loader-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: #000;
      z-index: 20; /* Tout au dessus */
      display: flex; justify-content: center; align-items: center;
      flex-direction: column;
    }

    /* Le Cercle SVG */
    .loader-ring-container {
      position: relative;
      width: 200px; height: 200px;
    }

    svg.loader-ring {
      width: 100%; height: 100%;
      transform: rotate(-90deg); /* Commence en haut */
      filter: drop-shadow(0 0 4px rgba(212, 175, 55, 0.4)); /* Lueur dorée subtile */
    }

    circle {
      fill: none;
      stroke-width: 1.5; /* Fin pour l'élégance */
      stroke-linecap: square;
    }

    .circle-bg { stroke: #1a1a1a; } /* Cercle gris sombre en fond */
    .circle-progress { stroke: var(--gold-accent); } /* Cercle doré qui avance */

    /* Le Texte Central (Asset Classes) */
    .loader-text-container {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      text-align: center;
      overflow: hidden;
      height: 32px; /* Hauteur fixe pour le défilement */
      display: flex; justify-content: center; align-items: center;
    }

    .asset-name {
      font-family: var(--font-main);
      font-size: 10px;
      font-weight: 400;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--text-white);
      position: relative;
      opacity: 0;
      white-space: nowrap;
    }

    /* --- 4. LE LOGO FINAL --- */
    main {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      z-index: 10; cursor: pointer;
      width: 100%; text-align: center;
    }

    .logo-main {
      width: auto; max-width: 70%; max-height: 140px;
      opacity: 0; /* Apparaît à la fin */
    }
    
    @media (max-width: 600px) {
      .loader-ring-container { width: 160px; height: 160px; }
      .asset-name { font-size: 8.5px; letter-spacing: 1.5px; }
    }
  </style>
</head>
<body>

  <div class="bg-container">
    <img id="bgImage" class="bg-image" alt="Background">
  </div>

  <div id="loaderOverlay" class="loader-overlay">
    
    <div class="loader-ring-container">
      <div class="loader-text-container">
        <!-- Texte unique, mis à jour par JS en fonction de la taxonomie -->
        <span class="asset-name" id="assetText"></span>
      </div>

      <svg class="loader-ring" viewBox="0 0 100 100">
        <circle class="circle-bg" cx="50" cy="50" r="48"></circle>
        <circle id="progressCircle" class="circle-progress" cx="50" cy="50" r="48"></circle>
      </svg>
    </div>

  </div>

  <main onclick="enterSite()">
    <img src="img/logo_noir.jpg" alt="HFG CAPITAL" class="logo-main" id="finalLogo">
  </main>


<script>
/* --- 1. GESTION DU FOND ALEATOIRE --- */
const bgImages = [
  "img/rouge_02.png", "img/rouge_04.png", "img/jaune_01.png", "img/jaune_02.png", 
  "img/jaune_04.png", "img/vert_01.png", "img/vert_02.png", "img/bleu_02.png",  
  "img/bleu_03.png", "img/bleu_04.png", "img/bleu_05.png", "img/orange_02.png", 
  "img/violet_01.png", "img/violet_03.png"
];
const STORAGE_KEY_BG = 'hfg_bg_session';
const STORAGE_KEY_THEME = 'hfg_theme';

(function initBackgroundNow() {
  const bgEl = document.getElementById('bgImage');
  if (bgEl) {
    let currentBg = sessionStorage.getItem(STORAGE_KEY_BG);
    if (!currentBg || !bgImages.includes(currentBg)) {
      const randomIndex = Math.floor(Math.random() * bgImages.length);
      currentBg = bgImages[randomIndex];
      sessionStorage.setItem(STORAGE_KEY_BG, currentBg);
    }
    bgEl.src = currentBg; 
  }
})();

/* --- 2. TAXONOMIE DES ACTIFS POUR L'ANIMATION --- */
/* 5 FAMILLES -> 20% de l'anneau par famille, avec défilement des sous-familles */
const taxonomy = [
  {
    family: "LISTED MARKETS — MARCHÉS COTÉS",
    items: [
      "Actions — Large Cap",
      "Actions — Mid Cap",
      "Actions — Small Cap",
      "Actions — Micro Cap",
      "Actions — Growth",
      "Actions — Value",
      "Actions — Dividendes",
      "Actions sectorielles — Tech",
      "Actions sectorielles — Santé",
      "Actions sectorielles — Industrie",
      "Actions sectorielles — Énergies & Utilities",
      "Actions sectorielles — Finance",
      "Actions sectorielles — Consommation",
      "Immobilier coté — REITs",
      "Actions — Europe",
      "Actions — US",
      "Actions — Asie & Japon",
      "Actions — Marchés émergents",
      "Obligations souveraines — Court terme",
      "Obligations souveraines — Moyen / long terme",
      "Obligations souveraines — Inflation-indexées",
      "Obligations corporate — Investment Grade",
      "Obligations corporate — High Yield",
      "Obligations corporate — Fallen Angels",
      "Obligations datées — Maturity Funds",
      "Obligations convertibles",
      "Obligations — Emerging Markets Debt",
      "ETF — Actions",
      "ETF — Obligations",
      "ETF — Thématiques",
      "ETN / ETP",
      "Trackers de matières premières",
      "Dérivés — Options (Call / Put / Covered)",
      "Dérivés — Futures",
      "Dérivés — Leverage / Short",
      "Produits structurés cotés",
      "Contrats de capitalisation — Fonds €",
      "Contrats de capitalisation — Unités de compte"
    ]
  },
  {
    family: "PRIVATE MARKETS — MARCHÉS PRIVÉS",
    items: [
      "Private Equity — LBO Large Cap",
      "Private Equity — LBO Mid Cap",
      "Private Equity — LBO Small Cap",
      "Private Equity — Growth Equity",
      "Private Equity — Infrastructure Equity",
      "Private Equity — Co-investissements directs",
      "Venture Capital — Pre-Seed",
      "Venture Capital — Seed",
      "Venture Capital — Series A",
      "Venture Capital — Series B–C+",
      "Venture Capital — Late Stage / Pre-IPO",
      "Venture Capital — Fintech",
      "Venture Capital — SaaS",
      "Venture Capital — MedTech",
      "Venture Capital — DeepTech",
      "Secondaires — LP (rachat de parts de fonds)",
      "Secondaires — GP-led single asset",
      "Secondaires — GP-led multi asset",
      "Secondaires — Tenders & restructurations",
      "Secondaires — Pré-IPO (Revolut, SpaceX, Stripe…)",
      "Private Debt — Direct Lending (Senior Secured)",
      "Private Debt — Unitranche",
      "Private Debt — Mezzanine",
      "Private Debt — Distressed Debt",
      "Private Debt — Special Situations",
      "Private Debt — Real Asset / Infrastructure Debt",
      "Private Debt — Venture Debt",
      "Private Debt — Asset-Backed Lending (ABL)",
      "Private Debt — Trade Finance",
      "Infrastructure non cotée — Énergie (solaire, éolien, hydro)",
      "Infrastructure non cotée — Transport (routes, ports, rails)",
      "Infrastructure non cotée — Télécom (fibre, data centers)",
      "Infrastructure non cotée — Social (hôpitaux, écoles)",
      "Private Real Estate — Fonds immobiliers non cotés",
      "Private Real Estate — Club deals immobiliers",
      "Private Real Estate — Développement / promotion",
      "Private Real Estate — Core / Core+",
      "Private Real Estate — Value-add / Opportunistic"
    ]
  },
  {
    family: "ALTERNATIVE MARKETS",
    items: [
      "Immobilier indirect — SCPI Bureaux",
      "Immobilier indirect — SCPI Santé",
      "Immobilier indirect — SCPI Logistique",
      "Immobilier indirect — SCPI Pan-européennes",
      "Immobilier indirect — OPCI",
      "Immobilier indirect — SCI à capital variable",
      "Immobilier indirect — REITs (borderline listed)",
      "Crowdlending — Immobilier résidentiel (promotion)",
      "Crowdlending — Immobilier tertiaire",
      "Crowdlending — Marchands de biens",
      "Crowdlending — Bridge financing",
      "Crowdlending — Prêts corporate",
      "Crowdlending — P2P consommation",
      "Crypto — Layer 1 (BTC, ETH, SOL, ADA…)",
      "Crypto — Layer 2 (ARB, OP, MATIC/POL…)",
      "DeFi — Lending (Aave, Morpho…)",
      "DeFi — DEX tokens (UNI, DYDX…)",
      "DeFi — Liquid staking (stETH, eETH…)",
      "DeFi — Restaking (EigenLayer, Ethena…)",
      "Stablecoins — USDC / USDT / DAI / EUROC",
      "CeFi yield — Nexo",
      "CeFi yield — Coinbase Earn",
      "RWA tokenisés — T-Bills tokenisés",
      "RWA tokenisés — Immobilier tokenisé",
      "Matières premières — Or / Argent / Palladium",
      "Matières premières — Pétrole / Gaz",
      "Matières premières — Softs (cacao, café, blé…)",
      "Collectibles — Art",
      "Collectibles — Montres",
      "Collectibles — Vin & Whisky",
      "Collectibles — Voitures de collection",
      "Collectibles — NFT (borderline crypto)",
      "Produits structurés non cotés — Autocall",
      "Produits structurés non cotés — Titrisations privées",
      "Produits structurés non cotés — Notes crédit privées"
    ]
  },
  {
    family: "REAL ASSETS — MONDE RÉEL",
    items: [
      "Immobilier direct — Résidentiel",
      "Immobilier direct — Commerces",
      "Immobilier direct — Logistique",
      "Immobilier direct — Locatif meublé",
      "Immobilier direct — Promotion en direct",
      "Immobilier direct — Foncières privées",
      "Infrastructures physiques — Énergies renouvelables",
      "Infrastructures physiques — Terrains & forêts",
      "Infrastructures physiques — Exploitations agricoles",
      "Actifs productifs — Machines",
      "Actifs productifs — Flottes (camions, avions – leasing)",
      "Actifs productifs — Hydrocarbures (royalties)"
    ]
  },
  {
    family: "TRÉSORERIE & LIQUIDITÉS",
    items: [
      "Trésorerie — Comptes à terme",
      "Trésorerie — Monétaire court terme",
      "Trésorerie — T-Bills",
      "Trésorerie — Euro-monétaire",
      "Trésorerie — Dépôts rémunérés (fintech)",
      "Devises — USD",
      "Devises — CHF",
      "Devises — JPY",
      "Devises — Autres devises fortes",
      "Stratégies — Couverture FX"
    ]
  }
];

/* --- 3. ANIMATION GSAP --- */
document.addEventListener('DOMContentLoaded', () => {
  const progressCircle = document.getElementById('progressCircle');
  const loaderOverlay = document.getElementById('loaderOverlay');
  const finalLogo = document.getElementById('finalLogo');
  const bgImage = document.getElementById('bgImage');
  const ringContainer = document.querySelector('.loader-ring-container');
  const assetText = document.getElementById('assetText');

  // Config SVG
  const radius = 48;
  const circumference = 2 * Math.PI * radius;
  gsap.set(progressCircle, { strokeDasharray: circumference, strokeDashoffset: circumference });
  gsap.set(ringContainer, { transformOrigin: "50% 50%" });

  const tl = gsap.timeline({ delay: 0.5 });

  // Paramètres d'animation
  let currentOffset = circumference;
  const familyCount = taxonomy.length;
  const familySegment = circumference / familyCount;
  const stepDuration = 0.45; // durée pour chaque item (texte + progression)

  // Boucle principale sur les 5 familles
  taxonomy.forEach((group, familyIndex) => {
    const groupTotalSteps = 1 + group.items.length; // 1 pour le titre de famille + items

    // 1) Titre de la famille
    const familyStepKey = `family_${familyIndex}`;
    const familyNextOffset = currentOffset - (familySegment / groupTotalSteps);

    tl.add(familyStepKey);

    tl.call(() => {
      assetText.textContent = group.family;
    }, null, familyStepKey);

    tl.fromTo(assetText,
      { opacity: 0, y: 10 },
      { opacity: 1, y: 0, duration: 0.22, ease: "power2.out" },
      familyStepKey
    );

    tl.to(progressCircle, {
      strokeDashoffset: familyNextOffset,
      duration: stepDuration,
      ease: "none"
    }, familyStepKey);

    tl.to(assetText, {
      opacity: 0,
      y: -10,
      duration: 0.22,
      ease: "power2.in"
    }, familyStepKey + "+=0.23");

    currentOffset = familyNextOffset;

    // 2) Items de la famille
    group.items.forEach((label, itemIndex) => {
      const stepKey = `family_${familyIndex}_item_${itemIndex}`;
      const nextOffset = currentOffset - (familySegment / groupTotalSteps);

      tl.add(stepKey);

      tl.call(() => {
        assetText.textContent = label;
      }, null, stepKey);

      tl.fromTo(assetText,
        { opacity: 0, y: 8 },
        { opacity: 1, y: 0, duration: 0.2, ease: "power2.out" },
        stepKey
      );

      tl.to(progressCircle, {
        strokeDashoffset: nextOffset,
        duration: stepDuration,
        ease: "none"
      }, stepKey);

      tl.to(assetText, {
        opacity: 0,
        y: -8,
        duration: 0.2,
        ease: "power2.in"
      }, stepKey + "+=0.22");

      currentOffset = nextOffset;
    });
  });

  // --- PARTIE FINALE : HFG CAPITAL + SHOCKWAVE --- //
  tl.addLabel("complete");

  tl.call(() => {
    assetText.textContent = "HFG CAPITAL — MULTI-ASSET FAMILY OFFICE";
  }, null, "complete");

  tl.to(assetText, {
    opacity: 1,
    scale: 1.05,
    duration: 0.4,
    color: '#D4AF37',
    ease: "power2.out"
  }, "complete");

  // 1. Contraction
  tl.to(ringContainer, {
    scale: 0.8,
    duration: 0.4,
    ease: "back.in(2)"
  }, "complete+=0.4");

  // 2. Disparition du texte
  tl.to(assetText, {
    opacity: 0,
    duration: 0.2
  }, ">");

  // 3. Explosion / expansion du cercle (shockwave)
  tl.to(ringContainer, {
    scale: 15,
    opacity: 0,
    duration: 0.7,
    ease: "power2.in"
  }, ">");

  // 4. Fade out de l'overlay noir
  tl.to(loaderOverlay, {
    opacity: 0,
    duration: 0.8,
    ease: "power2.inOut",
    onComplete: () => loaderOverlay.remove()
  }, "<+=0.1");

  // 5. Apparition du fond + logo
  tl.to(bgImage, {
    opacity: 1,
    scale: 1,
    duration: 1.5,
    ease: "power2.out"
  }, "reveal");

  tl.fromTo(finalLogo,
    { scale: 0.9, opacity: 0, y: 20 },
    { scale: 1, opacity: 1, y: 0, duration: 1.5, ease: "power3.out" },
    "reveal-=0.5"
  );
});

/* --- REDIRECTION --- */
function enterSite() {
  gsap.to(document.body, { 
    opacity: 0, 
    duration: 0.6, 
    onComplete: () => {
      localStorage.setItem(STORAGE_KEY_THEME, 'light'); 
      window.location.href = "home.html"; 
    }
  });
}
</script>
</body>
</html>
