<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>HFG CAPITAL</title>
  <meta name="description" content="HFG CAPITAL - Private Investment Office" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="shortcut icon" href="favicon/favicon.ico">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <style>
    :root {
      --bg-color: #000000;
      --gold-accent: #D4AF37;
      --text-white: #ffffff;
      --text-muted: #999999;
      --font-main: 'Montserrat', sans-serif;
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: var(--font-main);
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      background-color: var(--bg-color);
      position: relative;
      color: var(--text-white);
    }

    /* --- BACKGROUND IMAGE (cachée au début) --- */
    .bg-container {
      position: fixed;
      inset: 0;
      z-index: 0;
    }

    .bg-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transform: scale(1.08);
      transition: opacity 1.5s ease, transform 1.5s ease;
    }

    /* --- OVERLAY DE CHARGEMENT --- */
    .loader-overlay {
      position: fixed;
      inset: 0;
      background-color: #000000;
      z-index: 20;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .loader-ring-container {
      position: relative;
      width: 220px;
      height: 220px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    svg.loader-ring {
      width: 100%;
      height: 100%;
      transform: rotate(-90deg);
      filter: drop-shadow(0 0 4px rgba(212, 175, 55, 0.35));
    }

    circle {
      fill: none;
      stroke-width: 1.8;
      stroke-linecap: square;
    }

    .circle-bg {
      stroke: #1a1a1a;
    }

    .circle-progress {
      stroke: var(--gold-accent);
    }

    .loader-text-container {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      text-align: center;
      overflow: hidden;
      height: 34px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .asset-name {
      font-size: 11px;
      font-weight: 400;
      letter-spacing: 2px;
      text-transform: uppercase;
     /* color: var(--text-white);*/
      color: var(--gold-accent);
      opacity: 0;
      white-space: nowrap;
    }

    .sub-asset-container {
      margin-top: 18px;
      text-align: center;
      min-height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-size: 11px;
    }

    .sub-asset-label {
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.18s ease-out, transform 0.18s ease-out;
      white-space: nowrap;
    }

    .sub-asset-lang {
      font-size: 10px;
      color: var(--text-muted);
      opacity: 0;
      transform: translateY(5px);
      transition: opacity 0.18s ease-out, transform 0.18s ease-out;
      white-space: nowrap;
    }

    .sub-asset-container.visible .sub-asset-label,
    .sub-asset-container.visible .sub-asset-lang {
      opacity: 1;
      transform: translateY(0);
    }

    /* --- LOGO FINAL --- */
    main {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;  
      align-items: center;
      justify-content: center;
      z-index: 10;
      pointer-events: auto;
    }

      .click-hint {
        margin-top: 10px;
        font-size: 11px;
        letter-spacing: 1px;
        text-transform: uppercase;
        color: var(--text-white);
        opacity: 0;                      /* géré par GSAP */
        pointer-events: none;
      }
    
    .logo-main {
     /* max-width: 70%;
      max-height: 150px;*/
      width: auto;
      max-width: 85%;
      max-height: 160px;
      margin-bottom: 50px;
      
      opacity: 0;
      cursor: pointer;
    }

    @media (max-width: 600px) {
      .loader-ring-container {
        width: 180px;
        height: 180px;
      }
      .asset-name {
        font-size: 9.5px;
        letter-spacing: 1.7px;
      }
      .sub-asset-container {
        font-size: 10px;
      }
    }
  </style>
</head>
<body>

  <!-- BACKGROUND IMAGE -->
  <div class="bg-container">
    <img id="bgImage" class="bg-image" alt="Background">
  </div>

  <!-- OVERLAY / PRELOADER -->
  <div id="loaderOverlay" class="loader-overlay">
    <div class="loader-ring-container">
      <div class="loader-text-container">
        <span class="asset-name" id="assetText"></span>
      </div>

      <svg class="loader-ring" viewBox="0 0 100 100">
        <circle class="circle-bg" cx="50" cy="50" r="48"></circle>
        <circle id="progressCircle" class="circle-progress" cx="50" cy="50" r="48"></circle>
      </svg>
    </div>

    <div class="sub-asset-container" id="subAssetContainer">
      <span class="sub-asset-label" id="subAssetText"></span>
      <span class="sub-asset-lang" id="subAssetLang"></span>
    </div>
  </div>

  <!-- LOGO / PAGE PRINCIPALE -->
  <main onclick="enterSite()">
    <!-- Remplace le src par ton logo si besoin -->
    <img src="img/logo_gold.jpg" alt="HFG CAPITAL" class="logo-main" id="finalLogo">
    <div id="clickHint" class="click-hint"></div>
  </main>

<script>
/* ---------- 1. BACKGROUND ALEATOIRE ---------- */
const bgImages = [
  "img/rouge_02.png", "img/rouge_04.png", "img/jaune_01.png", "img/jaune_02.png", 
  "img/jaune_04.png", "img/vert_01.png", "img/vert_02.png", "img/bleu_02.png",  
  "img/bleu_03.png", "img/bleu_04.png", "img/bleu_05.png", "img/orange_02.png", 
  "img/violet_01.png", "img/violet_03.png"
];

const STORAGE_KEY_BG = 'hfg_bg_session';
const STORAGE_KEY_THEME = 'hfg_theme';

(function initBackgroundNow() {
  const bgEl = document.getElementById('bgImage');
  if (!bgEl) return;

  let currentBg = sessionStorage.getItem(STORAGE_KEY_BG);
  if (!currentBg || !bgImages.includes(currentBg)) {
    const randomIndex = Math.floor(Math.random() * bgImages.length);
    currentBg = bgImages[randomIndex];
    sessionStorage.setItem(STORAGE_KEY_BG, currentBg);
  }
  bgEl.src = currentBg;
})();

/* ---------- 2. TAXONOMIE + LANGUES ---------- */

// 10 langues : FR, EN, ES, DE, IT, RU, JA, ZH, VI, ID
const languages = [
  { code: "FR", key: "fr" },
  { code: "EN", key: "en" },
  { code: "ES", key: "es" },
  { code: "DE", key: "de" },
  { code: "IT", key: "it" },
  { code: "RU", key: "ru" },
  { code: "JA", key: "ja" },
  { code: "ZH", key: "zh" },
  { code: "VI", key: "vi" },
  { code: "ID", key: "id" }
];

// 4 familles + sous-familles, avec traduction multilingue
const taxonomy = [
  {
    family: "LISTED MARKETS",
    subFamilies: [
      {
        id: "stocks",
        labels: {
          en: "Stocks",
          fr: "Actions",
          es: "Acciones",
          de: "Aktien",
          it: "Azioni",
          ru: "Акции",
          ja: "株式",
          zh: "股票",
          vi: "Cổ phiếu",
          id: "Saham"
        }
      },
      {
        id: "bonds",
        labels: {
          en: "Bonds",
          fr: "Obligations",
          es: "Bonos",
          de: "Anleihen",
          it: "Obbligazioni",
          ru: "Облигации",
          ja: "債券",
          zh: "债券",
          vi: "Trái phiếu",
          id: "Obligasi"
        }
      },
      {
        id: "etf",
        labels: {
          en: "ETFs",
          fr: "Trackers & ETF",
          es: "ETF",
          de: "ETFs",
          it: "ETF",
          ru: "ETF",
          ja: "ETF",
          zh: "ETF",
          vi: "Quỹ ETF",
          id: "Reksa Dana ETF"
        }
      },
      {
        id: "derivatives",
        labels: {
          en: "Derivatives",
          fr: "Produits dérivés",
          es: "Derivados",
          de: "Derivate",
          it: "Derivati",
          ru: "Производные",
          ja: "デリバティブ",
          zh: "衍生品",
          vi: "Phái sinh",
          id: "Derivatif"
        }
      }
    ]
  },
  {
    family: "PRIVATE MARKETS",
    subFamilies: [
      {
        id: "pe",
        labels: {
          en: "Private Equity",
          fr: "Capital-investissement",
          es: "Capital privado",
          de: "Private Equity",
          it: "Private Equity",
          ru: "Частный капитал",
          ja: "プライベート・エクイティ",
          zh: "私募股权",
          vi: "Vốn tư nhân",
          id: "Ekuitas Swasta"
        }
      },
      {
        id: "vc",
        labels: {
          en: "Venture Capital",
          fr: "Capital-risque",
          es: "Capital riesgo",
          de: "Venture Capital",
          it: "Venture Capital",
          ru: "Венчурный капитал",
          ja: "ベンチャーキャピタル",
          zh: "风险投资",
          vi: "Vốn mạo hiểm",
          id: "Modal Ventura"
        }
      },
      {
        id: "pd",
        labels: {
          en: "Private Debt",
          fr: "Dette privée",
          es: "Deuda privada",
          de: "Private Debt",
          it: "Debito privato",
          ru: "Частный долг",
          ja: "プライベートデット",
          zh: "私募债务",
          vi: "Nợ tư nhân",
          id: "Utang Swasta"
        }
      },
      {
        id: "secondary",
        labels: {
          en: "Secondaries",
          fr: "Secondaires",
          es: "Secundarios",
          de: "Secondaries",
          it: "Secondaries",
          ru: "Вторичный рынок",
          ja: "セカンダリー",
          zh: "二级市场基金",
          vi: "Thị trường thứ cấp",
          id: "Pasar Sekunder"
        }
      }
    ]
  },
  {
    family: "REAL ASSETS",
    subFamilies: [
      {
        id: "direct_re",
        labels: {
          en: "Direct Real Estate",
          fr: "Immobilier direct",
          es: "Inmobiliario directo",
          de: "Direkte Immobilien",
          it: "Immobiliare diretto",
          ru: "Прямая недвижимость",
          ja: "ダイレクト不動産",
          zh: "直接房地产",
          vi: "Bất động sản trực tiếp",
          id: "Properti langsung"
        }
      },
      {
        id: "infra",
        labels: {
          en: "Physical Infrastructure",
          fr: "Infrastructures physiques",
          es: "Infraestructuras físicas",
          de: "Physische Infrastrukturen",
          it: "Infrastrutture fisiche",
          ru: "Физическая инфраструктура",
          ja: "物理インフラ",
          zh: "实体基础设施",
          vi: "Hạ tầng vật chất",
          id: "Infrastruktur fisik"
        }
      },
      {
        id: "productive",
        labels: {
          en: "Productive Assets",
          fr: "Actifs productifs",
          es: "Activos productivos",
          de: "Produktive Vermögenswerte",
          it: "Attivi produttivi",
          ru: "Производственные активы",
          ja: "生産資産",
          zh: "生产性资产",
          vi: "Tài sản sản xuất",
          id: "Aset produktif"
        }
      }
    ]
  },
  {
    family: "ALTERNATIVE ASSETS",
    subFamilies: [
      {
        id: "indirect_re",
        labels: {
          en: "Indirect Real Estate",
          fr: "Immobilier indirect (SCPI & OPCI)",
          es: "Inmobiliario indirecto",
          de: "Indirekte Immobilien",
          it: "Immobiliare indiretto",
          ru: "Косвенная недвижимость",
          ja: "間接不動産",
          zh: "间接房地产",
          vi: "Bất động sản gián tiếp",
          id: "Properti tidak langsung"
        }
      },
      {
        id: "crypto",
        labels: {
          en: "Crypto Assets",
          fr: "Actifs crypto",
          es: "Activos cripto",
          de: "Krypto-Assets",
          it: "Asset cripto",
          ru: "Криптоактивы",
          ja: "暗号資産",
          zh: "加密资产",
          vi: "Tài sản crypto",
          id: "Aset kripto"
        }
      },
      {
        id: "commodities",
        labels: {
          en: "Commodities",
          fr: "Matières premières",
          es: "Materias primas",
          de: "Rohstoffe",
          it: "Materie prime",
          ru: "Сырьевые товары",
          ja: "コモディティ",
          zh: "大宗商品",
          vi: "Hàng hóa",
          id: "Komoditas"
        }
      },
      {
        id: "collectibles",
        labels: {
          en: "Collectibles",
          fr: "Actifs de collection",
          es: "Coleccionables",
          de: "Sammlerobjekte",
          it: "Collezionabili",
          ru: "Коллекционные активы",
          ja: "コレクティブル",
          zh: "收藏品",
          vi: "Tài sản sưu tầm",
          id: "Koleksi"
        }
      }
    ]
  }
];

const clickPhrases = {
  fr: "Entrer",
  en: "Enter",
  es: "Entrar",
  de: "Eintreten",
  it: "Entrare",
  ru: "Войти",
  ja: "入る",
  zh: "进入",
  vi: "Vào",
  id: "Masuk"
};

  
/* ---------- 3. ANIMATION GSAP + LOGIQUE SOUS-FAMILLES ---------- */

let subInterval = null;
let currentFamilyIndex = 0;

function startSubFamilyLoop(familyIndex) {
  const container = document.getElementById('subAssetContainer');
  const labelEl = document.getElementById('subAssetText');
  const langEl  = document.getElementById('subAssetLang');

  if (!container || !labelEl || !langEl) return;

  // Stop interval précédent
  if (subInterval) {
    clearInterval(subInterval);
    subInterval = null;
  }

  const family = taxonomy[familyIndex];
  if (!family) return;

  let idx = 0;

  function updateSubfamily() {
    const sub = family.subFamilies[idx % family.subFamilies.length];

    // langue aléatoire
    const lang = languages[Math.floor(Math.random() * languages.length)];
    const label = sub.labels[lang.key] || sub.labels['en'] || '';

    // petite animation via CSS
    container.classList.remove('visible');
    void container.offsetWidth; // force reflow

    labelEl.textContent = label;
    langEl.textContent = "• " + lang.code;

    container.classList.add('visible');

    idx++;
  }

  // Première maj immédiate
  updateSubfamily();
  // Puis toutes les 280ms (rapide)
  subInterval = setInterval(updateSubfamily, 280);
}

let clickHintInterval = null;

function startClickHintLoop() {
  const hintEl = document.getElementById('clickHint');
  if (!hintEl) return;

  // on ne garde que les langues pour lesquelles on a une phrase
  const availableLangs = languages.filter(l => clickPhrases[l.key]);
  if (!availableLangs.length) return;

  let idx = 0;

  function updateHint() {
    const lang = availableLangs[idx % availableLangs.length];
    const phrase = clickPhrases[lang.key] || clickPhrases.en;

    // reset
    gsap.killTweensOf(hintEl);
    hintEl.style.opacity = 0;

    // texte type : "Cliquez sur le logo (FR)"
    hintEl.textContent = `${phrase} (${lang.code})`;

    gsap.to(hintEl, {
      opacity: 0.8,
      duration: 0.3,
      ease: "power2.out"
    });

    idx++;
  }

  // première phrase tout de suite
  updateHint();

  // puis une nouvelle toutes les 2 secondes
  if (clickHintInterval) clearInterval(clickHintInterval);
  clickHintInterval = setInterval(updateHint, 2000);
}

  
document.addEventListener('DOMContentLoaded', () => {
  const progressCircle = document.getElementById('progressCircle');
  const loaderOverlay  = document.getElementById('loaderOverlay');
  const finalLogo      = document.getElementById('finalLogo');
  const bgImage        = document.getElementById('bgImage');
  const assetText      = document.getElementById('assetText');

  const radius = 48;
  const circumference = 2 * Math.PI * radius;
  gsap.set(progressCircle, {
    strokeDasharray: circumference,
    strokeDashoffset: circumference
  });

  const ringContainer = document.querySelector('.loader-ring-container');
  gsap.set(ringContainer, { transformOrigin: "50% 50%" });

  const familyCount = taxonomy.length;
  const segment = circumference / familyCount;

  const tl = gsap.timeline({ delay: 0.4 });

  let currentOffset = circumference;
  const familyDisplayDuration = 1.4; // ~1.4s par famille (rapide)

  taxonomy.forEach((group, index) => {
    const stepLabel = "family_" + index;
    const nextOffset = circumference - segment * (index + 1);

    tl.add(stepLabel);

    tl.call(() => {
      currentFamilyIndex = index;
      assetText.textContent = group.family;
      gsap.fromTo(assetText,
        { opacity: 0, y: 8 },
        { opacity: 1, y: 0, duration: 0.3, ease: "power2.out" }
      );
      startSubFamilyLoop(index);
    }, null, stepLabel);

    tl.to(progressCircle, {
      strokeDashoffset: nextOffset,
      duration: familyDisplayDuration,
      ease: "none"
    }, stepLabel);

    tl.to(assetText, {
      opacity: 0,
      y: -8,
      duration: 0.3,
      ease: "power2.in"
    }, stepLabel + "+=" + (familyDisplayDuration - 0.3));

    currentOffset = nextOffset;
  });

  // FIN : message HFG + shockwave
  tl.add("complete");

  tl.call(() => {
    if (subInterval) {
      clearInterval(subInterval);
      subInterval = null;
    }
    const container = document.getElementById('subAssetContainer');
    if (container) {
      container.classList.remove('visible');
    }
    assetText.textContent = "✦";
  }, null, "complete");

  tl.fromTo(assetText,
    { opacity: 0, scale: 0.9, y: 6 },
    { opacity: 1, scale: 1.9, y: 0, duration: 0.45, ease: "power2.out" },
    "complete"
  );


  // contraction
  tl.to(ringContainer, {
    scale: 0.8,
    duration: 0.4,
    ease: "back.in(2)"
  }, "complete+=0.4");

  // disparition texte
  tl.to(assetText, {
    opacity: 0,
    duration: 0.2
  }, ">");

  // explosion cercle
  tl.to(ringContainer, {
    scale: 14,
    opacity: 0,
    duration: 0.7,
    ease: "power2.in"
  }, ">");

  // fade out overlay
  tl.to(loaderOverlay, {
    opacity: 0,
    duration: 0.8,
    ease: "power2.inOut",
    onComplete: () => {
      loaderOverlay.remove();
    }
  }, "<+=0.1");

  // fond + logo
/*  tl.to(bgImage, {
    opacity: 1,
    scale: 1,
    duration: 1.5,
    ease: "power2.out"
  }, "reveal");*/

  tl.fromTo(finalLogo,
    { opacity: 0, scale: 0.9, y: 20 },
    { opacity: 1, scale: 1, y: 0, duration: 1.5, ease: "power3.out" },
    "reveal-=0.5"
  );
  
  tl.call(startClickHintLoop, null, "reveal+=0.7");
  
});

/* ---------- 4. REDIRECTION ---------- */
function enterSite() {
  if (clickHintInterval) {
    clearInterval(clickHintInterval);
    clickHintInterval = null;
  }
  gsap.to(document.body, {
    opacity: 0,
    duration: 0.6,
    onComplete: () => {
      localStorage.setItem(STORAGE_KEY_THEME, 'light');
      window.location.href = "home.html"; // adapte si nécessaire
    }
  });
}
</script>

</body>
</html>
