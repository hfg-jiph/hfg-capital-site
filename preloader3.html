<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>HFG CAPITAL</title>
  <meta name="description" content="HFG CAPITAL - Private Investment Office" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="shortcut icon" href="favicon/favicon.ico">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@200;300;400;500&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <style>
    /* --- 1. VARIABLES & BASE --- */
    :root {
      --bg-color: #000000;
      --gold-accent: #D4AF37;
      --text-white: #ffffff;
      --font-main: 'Montserrat', sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-main);
      height: 100vh; width: 100vw;
      overflow: hidden;
      background-color: var(--bg-color);
      position: relative;
    }

    /* --- 2. BACKGROUND IMAGE (Caché sous l'overlay au début) --- */
    .bg-container {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: 0; /* Au fond */
    }

    .bg-image {
      width: 100%; height: 100%; object-fit: cover;
      opacity: 0; /* Caché au début, géré par GSAP */
      transform: scale(1.1); /* Zoom initial */
    }

    /* --- 3. L'ECRAN DE CHARGEMENT (L'Overlay) --- */
    .loader-overlay {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      background-color: #000;
      z-index: 20; /* Tout au dessus */
      display: flex; justify-content: center; align-items: center;
      flex-direction: column;
    }

    /* Le Cercle SVG */
    .loader-ring-container {
      position: relative;
      width: 200px; height: 200px;
    }

    svg.loader-ring {
      width: 100%; height: 100%;
      transform: rotate(-90deg); /* Commence en haut */
      filter: drop-shadow(0 0 4px rgba(212, 175, 55, 0.4)); /* Lueur dorée subtile */
    }

    circle {
      fill: none;
      stroke-width: 1.5; /* Très fin pour l'élégance */
      stroke-linecap: square; 
    }

    .circle-bg { stroke: #1a1a1a; } /* Cercle gris sombre en fond */
    .circle-progress { stroke: var(--gold-accent); } /* Cercle doré qui avance */

    /* Le Texte Central (Asset Classes) */
    .loader-text-container {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      width: 100%;
      text-align: center;
      overflow: hidden; /* Pour couper le texte qui sort */
      height: 30px; /* Hauteur fixe pour le défilement */
      display: flex; justify-content: center; align-items: center;
    }

    .asset-name {
      font-family: var(--font-main);
      font-size: 11px;
      font-weight: 400;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--text-white);
      position: absolute;
      opacity: 0;
      white-space: nowrap;
    }

    /* --- 4. LE LOGO FINAL --- */
    main {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      z-index: 10; cursor: pointer;
      width: 100%; text-align: center;
    }

    .logo-main {
      width: auto; max-width: 70%; max-height: 140px;
      opacity: 0; /* Apparaît à la fin */
    }
    
    @media (max-width: 600px) {
        .loader-ring-container { width: 160px; height: 160px; }
        .asset-name { font-size: 9px; letter-spacing: 1.5px; }
    }
  </style>
</head>
<body>

  <div class="bg-container">
    <img id="bgImage" class="bg-image" alt="Background">
  </div>

  <div id="loaderOverlay" class="loader-overlay">
    
    <div class="loader-ring-container">
      <div class="loader-text-container">
        <span class="asset-name">Private Equity</span>
        <span class="asset-name">Venture Capital</span>
        <span class="asset-name">Real Estate</span>
        <span class="asset-name">Structured Debt</span>
        <span class="asset-name">HFG Capital</span>
      </div>

      <svg class="loader-ring" viewBox="0 0 100 100">
        <circle class="circle-bg" cx="50" cy="50" r="48"></circle>
        <circle id="progressCircle" class="circle-progress" cx="50" cy="50" r="48"></circle>
      </svg>
    </div>

  </div>

  <main onclick="enterSite()">
    <img src="img/logo_noir.jpg" alt="HFG CAPITAL" class="logo-main" id="finalLogo">
  </main>


<script>
/* --- 1. GESTION DU FOND ALEATOIRE --- */
const bgImages = [
  "img/rouge_02.png", "img/rouge_04.png", "img/jaune_01.png", "img/jaune_02.png", 
  "img/jaune_04.png", "img/vert_01.png", "img/vert_02.png", "img/bleu_02.png",  
  "img/bleu_03.png", "img/bleu_04.png", "img/bleu_05.png", "img/orange_02.png", 
  "img/violet_01.png", "img/violet_03.png"
];
const STORAGE_KEY_BG = 'hfg_bg_session';
const STORAGE_KEY_THEME = 'hfg_theme';

(function initBackgroundNow() {
  const bgEl = document.getElementById('bgImage');
  if (bgEl) {
    let currentBg = sessionStorage.getItem(STORAGE_KEY_BG);
    if (!currentBg || !bgImages.includes(currentBg)) {
      const randomIndex = Math.floor(Math.random() * bgImages.length);
      currentBg = bgImages[randomIndex];
      sessionStorage.setItem(STORAGE_KEY_BG, currentBg);
    }
    bgEl.src = currentBg; 
  }
})();

/* --- 2. ANIMATION L'ARCHITECTE --- */
document.addEventListener('DOMContentLoaded', () => {
    
    // Éléments DOM
    const progressCircle = document.getElementById('progressCircle');
    const assetNames = document.querySelectorAll('.asset-name');
    const loaderOverlay = document.getElementById('loaderOverlay');
    const finalLogo = document.getElementById('finalLogo');
    const bgImage = document.getElementById('bgImage');
    const ringContainer = document.querySelector('.loader-ring-container');

    // Configuration SVG
    // Dasharray = circonférence (2 * PI * r) -> r=48 -> ~301.59
    const circumference = 2 * Math.PI * 48;
    gsap.set(progressCircle, { strokeDasharray: circumference, strokeDashoffset: circumference });

    // Timeline Principale
    const tl = gsap.timeline({ delay: 0.5 });
    
    // --- PARTIE 1 : LE CHARGEMENT SÉQUENTIEL ---
    // On divise le temps total par le nombre d'étapes de texte (sauf le dernier qui est le final)
    const stepDuration = 0.8; 
    
    // Boucle sur les textes d'actifs (sauf le dernier "HFG")
    assetNames.forEach((text, index) => {
        if(index < assetNames.length - 1) {
            
            // Calcul du progrès du cercle pour cette étape
            const progressTarget = circumference - ((index + 1) / (assetNames.length - 1)) * circumference;
            
            tl.to(text, { 
                y: 0, opacity: 1, duration: 0.3, ease: "power2.out" 
            }, "step_" + index)
            
            .to(progressCircle, { 
                strokeDashoffset: progressTarget, 
                duration: stepDuration, 
                ease: "linear" 
            }, "step_" + index)
            
            .to(text, { 
                y: -10, opacity: 0, duration: 0.3, ease: "power2.in", delay: stepDuration - 0.3 
            }, "step_" + index);
        }
    });

    // --- PARTIE 2 : LA FINALISATION (100%) ---
    tl.addLabel("complete");

    // Affiche le dernier texte "HFG CAPITAL" au centre fixe
    const lastText = assetNames[assetNames.length - 1];
    
    tl.to(lastText, { opacity: 1, scale: 1.1, duration: 0.1, color: '#D4AF37' }, "complete")
    
    // --- PARTIE 3 : L'EFFET SHOCKWAVE / REVEAL ---
    
    // 1. Contraction (Tension)
    .to(ringContainer, { 
        scale: 0.8, 
        duration: 0.4, 
        ease: "back.in(2)" 
    }, "complete+=0.5")
    
    // 2. Disparition du texte
    .to(lastText, { opacity: 0, duration: 0.1 }, ">")
    
    // 3. Explosion / Expansion (Release)
    .to(ringContainer, { 
        scale: 15, // Agrandissement massif du cercle pour "sortir" de l'écran
        opacity: 0, 
        duration: 0.6, 
        ease: "power2.in" 
    }, ">")
    
    // 4. Fade Out de l'écran noir simultané
    .to(loaderOverlay, { 
        opacity: 0, 
        duration: 0.8, 
        ease: "power2.inOut",
        onComplete: () => loaderOverlay.remove() // Nettoyage DOM
    }, "<+=0.1") // Commence légèrement après le début de l'expansion
    
    // 5. Apparition majestueuse du Logo et du Fond
    .to(bgImage, { opacity: 1, scale: 1, duration: 1.5, ease: "power2.out" }, "reveal")
    .fromTo(finalLogo, 
        { scale: 0.9, opacity: 0, y: 20 },
        { scale: 1, opacity: 1, y: 0, duration: 1.5, ease: "power3.out" }, 
        "reveal-=0.5" // Le logo arrive pendant que le fond se stabilise
    );

});


/* --- REDIRECTION --- */
function enterSite() {
    gsap.to(document.body, { 
        opacity: 0, 
        duration: 0.6, 
        onComplete: () => {
            localStorage.setItem(STORAGE_KEY_THEME, 'light'); 
            window.location.href = "home.html"; 
        }
    });
}
</script>
</body>
</html>
