<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <title>HFG CAPITAL</title>
  <meta name="description" content="HFG CAPITAL - Private Investment Office" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <link rel="icon" type="image/png" sizes="32x32" href="favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="favicon/favicon-16x16.png">
  <link rel="shortcut icon" href="favicon/favicon.ico">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>

  <style>
    /* --- VARIABLES & RESET --- */
    :root {
      --primary-dark: #1a1a1a;
      --gold-accent: #D4AF37;
      --text-light: #ffffff;
      --font-sans: 'Montserrat', sans-serif;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-sans);
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      background-color: #000;
      position: relative; 
    }

    /* --- BACKGROUND --- */
    .bg-container {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: -1;
    }

    .bg-image {
      width: 100%; height: 100%; object-fit: cover; object-position: center center;
      transition: opacity 1s ease; animation: zoomIn 40s infinite alternate linear;
      will-change: transform; display: none; 
    }

    @keyframes zoomIn {
      from { transform: scale(1); }
      to { transform: scale(1.15); }
    }

    /* --- OVERLAY NOIR --- */
    .screen-overlay {
        position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
        background-color: #000;
        z-index: 10; 
    }

    /* --- MAIN LOGO --- */
    main {
      position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      text-align: center; width: 100%; padding: 0 20px;
      z-index: 5; cursor: pointer; 
    }

    .logo-main {
      width: auto; max-width: 85%; max-height: 160px;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.6));
    }

    /* --- CHART / MOUNTAIN SVG --- */
    .chart-container {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 20; pointer-events: none;
        /* Ajout d'un léger flou lumineux global sur le conteneur pour l'ambiance */
        filter: drop-shadow(0 0 8px rgba(212, 175, 55, 0.3)); 
    }

    #stockPath {
        fill: none;
        stroke: url(#lineGradient); /* Utilise le dégradé défini dans le HTML */
        stroke-width: 2.5; /* Légèrement plus épais pour l'élégance */
        stroke-linecap: round;
        stroke-linejoin: round;
        vector-effect: non-scaling-stroke;
    }

    /* --- POURCENTAGE (Style d'origine) --- */
    .progress-percent {
        position: absolute;
        top: 50%; left: 50%;
        /* Décalage exact de votre fichier d'origine */
        transform: translate(-50%, calc(-50% - 10px)); 
        font-family: var(--font-sans);
        font-size: 16px; /* Retour à la taille discrète */
        color: var(--text-light);
        font-weight: 300;
        z-index: 21; 
        opacity: 0; 
    }
    
    @media (max-width: 600px) {
      .logo-main { max-height: 100px; } 
    }
  </style>
</head>
<body>

  <div class="bg-container">
    <img id="bgImage" class="bg-image" alt="Background">
  </div>
  
  <div id="screenOverlay" class="screen-overlay"></div>

  <main onclick="enterSite()">
    <img src="img/logo_noir.jpg" alt="HFG CAPITAL" class="logo-main">
  </main>
  
  <div class="chart-container">
    <svg id="chartSvg" width="100%" height="100%" preserveAspectRatio="none">
        <defs>
            <linearGradient id="lineGradient" x1="0%" y1="100%" x2="100%" y2="0%">
                <stop offset="0%" style="stop-color:#D4AF37; stop-opacity:0.6" /> <stop offset="50%" style="stop-color:#D4AF37; stop-opacity:1" /> <stop offset="100%" style="stop-color:#ffffff; stop-opacity:1" /> </linearGradient>
        </defs>
        <path id="stockPath" d="" />
    </svg>
  </div>

  <div id="progressPercent" class="progress-percent">0%</div>


<script>
/* --- 1. GESTION DU FOND --- */
const bgImages = [
  "img/rouge_02.png", "img/rouge_04.png", "img/jaune_01.png", "img/jaune_02.png", 
  "img/jaune_04.png", "img/vert_01.png", "img/vert_02.png", "img/bleu_02.png",  
  "img/bleu_03.png", "img/bleu_04.png", "img/bleu_05.png", "img/orange_02.png", 
  "img/violet_01.png", "img/violet_03.png"
];
const STORAGE_KEY_BG = 'hfg_bg_session';
const STORAGE_KEY_THEME = 'hfg_theme';

(function initBackgroundNow() {
  const bgEl = document.getElementById('bgImage');
  if (bgEl) {
    let currentBg = sessionStorage.getItem(STORAGE_KEY_BG);
    if (!currentBg || !bgImages.includes(currentBg)) {
      const randomIndex = Math.floor(Math.random() * bgImages.length);
      currentBg = bgImages[randomIndex];
      sessionStorage.setItem(STORAGE_KEY_BG, currentBg);
    }
    bgEl.src = currentBg; 
    bgEl.onerror = function() { sessionStorage.removeItem(STORAGE_KEY_BG); };
  }
})();

/* --- 2. GENERATION DU GRAPHIQUE BOURSIER --- */
function generateStockPath() {
    const width = window.innerWidth;
    const height = window.innerHeight;
    
    // On augmente le nombre de segments pour une ligne moins brisée, plus fluide
    const segments = 20; 
    const stepX = width / segments;
    
    // Départ strict en bas à gauche
    let pathData = `M 0,${height} `; 
    
    let currentX = 0;
    
    for (let i = 1; i <= segments; i++) {
        currentX = i * stepX;
        
        // Ligne directrice : diagonale parfaite
        const targetY = height - (height * (i / segments));
        
        // Volatilité contrôlée (plus faible aux extrémités pour l'esthétique)
        let volatilityFactor = 0.3; // 30% de la hauteur max
        
        // On réduit le bruit au début et à la fin pour que ça "atterrisse" proprement
        if (i < 3 || i > segments - 3) volatilityFactor = 0.1;
        
        let noise = (Math.random() - 0.5) * (height * volatilityFactor); 
        
        let currentY = targetY + noise;

        // Force le point final en haut à droite (0)
        if (i === segments) {
            currentY = 0; 
            currentX = width;
        }
        
        pathData += `L ${currentX},${currentY} `;
    }

    return pathData;
}


/* --- 3. ANIMATION GSAP --- */
document.addEventListener('DOMContentLoaded', () => {
    const logo = document.querySelector('.logo-main');
    const progressPercent = document.getElementById('progressPercent');
    const screenOverlay = document.getElementById('screenOverlay');
    const path = document.getElementById('stockPath');
    
    path.setAttribute('d', generateStockPath());
    const pathLength = path.getTotalLength();
    
    // Initialisation
    gsap.set(path, { strokeDasharray: pathLength, strokeDashoffset: pathLength, opacity: 1 });
    gsap.set(logo, { opacity: 0, pointerEvents: 'none' });
    gsap.set(progressPercent, { opacity: 0 });

    const masterTL = gsap.timeline({ delay: 0.5 });

    // A. Apparition
    masterTL.to(progressPercent, { opacity: 1, duration: 0.5 })
    
    // B. Tracé de la ligne et Compteur
    .to(path, {
        strokeDashoffset: 0,
        duration: 3.5,
        ease: "power2.inOut" // Mouvement fluide
    }, "start")
    
    .to({ value: 0 }, {
        value: 100,
        duration: 3.5,
        ease: "power2.inOut",
        onUpdate: function() {
            progressPercent.textContent = Math.round(this.targets()[0].value) + '%';
        }
    }, "start")

    // C. Sortie
    .to([progressPercent, path], {
        opacity: 0,
        duration: 0.8,
        ease: "power2.in"
    })
    
    // D. Révélation Finale
    .to(screenOverlay, {
        opacity: 0,
        duration: 1.5,
        ease: "power2.inOut"
    }, "reveal")
    
    .fromTo(logo, 
        { opacity: 0, scale: 0.95, filter: 'blur(5px)' }, // Ajout d'un petit flou au début
        { 
            opacity: 1, scale: 1, filter: 'blur(0px)',
            duration: 1.8, 
            ease: "power2.out",
            onComplete: () => {
                logo.style.pointerEvents = 'auto';
                screenOverlay.remove();
            }
        }, 
        "reveal+=0.1" 
    );
    
    window.addEventListener('resize', () => {
        if(masterTL.progress() < 1) path.setAttribute('d', generateStockPath());
    });
});

/* --- REDIRECTION --- */
function enterSite() {
    gsap.to(document.body, { 
        opacity: 0, 
        duration: 0.5, 
        onComplete: () => {
            localStorage.setItem(STORAGE_KEY_THEME, 'light'); 
            window.location.href = "home.html"; 
        }
    });
}
</script>
</body>
</html>
